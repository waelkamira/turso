generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Meal {
  id                            String   @id @default(uuid())
  userName                      String
  createdBy                     String
  userImage                     String
  mealName                      String
  selectedValue                 String
  image                         String
  ingredients                   String
  theWay                        String
  advise                        String?
  link                          String?
  favorite                      Boolean  @default(false)
  usersWhoLikesThisRecipe       usersWhoLikesThisRecipe[]  // Relation
  usersWhoPutEmojiOnThisRecipe  usersWhoPutEmojiOnThisRecipe[]  // Relation
  usersWhoPutHeartOnThisRecipe  usersWhoPutHeartOnThisRecipe[]  // Relation

  createdAt                     DateTime @default(now())
  updatedAt                     DateTime @updatedAt
}

model usersWhoLikesThisRecipe {
  id        String @id @default(uuid())
  mealId    String
  email     String

  meal      Meal   @relation(fields: [mealId], references: [id])
}

model usersWhoPutEmojiOnThisRecipe {
  id        String @id @default(uuid())
  mealId    String
  email     String

  meal      Meal   @relation(fields: [mealId], references: [id])
}

model usersWhoPutHeartOnThisRecipe {
  id        String @id @default(uuid())
  mealId    String
  email     String

  meal      Meal   @relation(fields: [mealId], references: [id])
}

model Favorite {
  id            Int      @id @default(autoincrement())
  favoritedBy   String  // Assuming user ID

  userName      String?
  userImage     String?

  mealName      String?
  selectedValue String?
  image         String?
  ingredients   String?

  theWay        String?
  advise        String?
  link          String?

  numberOfLikes Int     @default(0)
  numberOfHearts Int    @default(0)
  numberOfEmojis Int    @default(0)

  interaction   String? // "like", "heart", "emoji", or null

  postId        String?

  createdAt     DateTime @default(now())
  updatedAt     DateTime @default(now())
}

model User {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  email     String   @unique
  password  String?
  isAdmin   Boolean  @default(false)
  image     String   @default("https://res.cloudinary.com/dh2xlutfu/image/upload/v1718369814/items/uefgzp5uba74cgiwnfdf.png")
  googleId  String?  @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}
